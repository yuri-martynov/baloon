<html>
	<head>
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="mobile-web-app-capable" content="yes">
		<meta name="viewport" content="initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,width=device-width,height=device-height,target-densitydpi=device-dpi,user-scalable=no,minimal-ui" />
		
		<!--todo: copy local-->
		<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Lato" />
		<link rel="StyleSheet" href="style.css" type="text/css" />
		<script src="main.js"></script>
	</head>
	<body>
		<script>
			var app = Elm.Atrapos.Main.fullscreen();

			app.ports.levelCompleted.subscribe(function(levelId) {
				var maxLevel = getMaxLevel();
				if (!maxLevel || levelId > maxLevel) {
					localStorage.maxLevel = levelId
				}
			});

			app.ports.getMaxLevel.subscribe(function() {
				var maxLevel = getMaxLevel();

				setTimeout(function() {
					app.ports.maxLevel.send(maxLevel);
				});
			});

			function getMaxLevel() {
				var maxLevelStr = localStorage.maxLevel
				return maxLevelStr ? parseInt (maxLevelStr) : 0;
			}
		</script>
	</body>
</html>